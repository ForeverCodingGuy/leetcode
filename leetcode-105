class Solution {
public:
    TreeNode* traversal(vector<int>& preorder,int prebegin,int preend,
                        vector<int>& inorder,int inbegin,int inend)
                        {

                            if(prebegin == preend) return nullptr;
                            int rootvalue = preorder[prebegin];
                            TreeNode* root = new TreeNode(rootvalue);
                            if(preend - prebegin == 1) return root;

                            int miterindex ;
                            for(int i = inbegin;i < inend;i++)
                            {
                                if(inorder[i] == rootvalue)
                                {
                                    miterindex = i;
                                }
                            }

                            int leftinbegin = inbegin;
                            int leftinend = miterindex;
                            int rightinbegin = miterindex + 1;
                            int rightinend = inend;

                            int leftprebegin = prebegin + 1;
                            int leftpreend = prebegin + 1 + miterindex - inbegin;
                            int rightprebegin = leftpreend;
                            int rightpreend = preend;

                            root -> left = traversal(preorder,leftprebegin,leftpreend,
                              inorder,leftinbegin,leftinend);

                            root -> right = traversal(preorder,rightprebegin,rightpreend,
                              inorder,rightinbegin,rightinend);

                            return root;
                        }
    TreeNode* buildTree(vector<int>& preorder, vector<int>& inorder) 
    {
        if(preorder.size() == 0 || preorder.size() == 0) return nullptr;
        return traversal(preorder,0,preorder.size(),inorder,0,inorder.size());
    }
};
